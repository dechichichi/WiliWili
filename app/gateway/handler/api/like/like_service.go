// Code generated by hertz generator.

package like

import (
	"context"

	api "wiliwili/app/gateway/model/api/like"
	"wiliwili/app/gateway/pack"
	"wiliwili/app/gateway/rpc"
	"wiliwili/kitex_gen/like"

	"github.com/cloudwego/hertz/pkg/app"
)

// LikeComment .
// @router api/v1/like/likecomment [POST]
func LikeComment(ctx context.Context, c *app.RequestContext) {
	var err error
	var req api.LikeCommentReq
	err = c.BindAndValidate(&req)
	if err != nil {
		pack.RespError(c, err)
		return
	}
	resp, err := rpc.LikeComment(ctx, &like.LikeCommentReq{
		CommentId: req.CommentID,
		UserId:    req.UserID,
		IsLike:    req.IsLike,
	})
	if err != nil {
		pack.RespError(c, err)
		return
	}
	pack.RespData(c, resp)
}

// LikeVideo .
// @router api/v1/like/likevideo [POST]
func LikeVideo(ctx context.Context, c *app.RequestContext) {
	var err error
	var req like.LikeVideoReq
	err = c.BindAndValidate(&req)
	if err != nil {
		pack.RespError(c, err)
		return
	}
	resp, err := rpc.LikeVideo(ctx, &like.LikeVideoReq{
		VideoId: req.VideoId,
		UserId:  req.UserId,
		IsLike:  req.IsLike,
	})
	if err != nil {
		pack.RespError(c, err)
		return
	}
	pack.RespData(c, resp)
}

// GetCommentLikeNum .
// @router api/v1/like/commentlike [GET]
func GetCommentLikeNum(ctx context.Context, c *app.RequestContext) {
	var err error
	var req like.CommentLikeNumReq
	err = c.BindAndValidate(&req)
	if err != nil {
		pack.RespError(c, err)
		return
	}
	resp, err := rpc.GetCommentLikeNum(ctx, &like.CommentLikeNumReq{
		CommentId: req.CommentId,
	})
	if err != nil {
		pack.RespError(c, err)
		return
	}
	pack.RespData(c, resp)
}

// GetVideoLikeNum .
// @router api/v1/like/videolike [GET]
func GetVideoLikeNum(ctx context.Context, c *app.RequestContext) {
	var err error
	var req like.VideoLikeNumReq
	err = c.BindAndValidate(&req)
	if err != nil {
		pack.RespError(c, err)
		return
	}
	resp, err := rpc.GetVideoLikeNum(ctx, &like.VideoLikeNumReq{
		VideoId: req.VideoId,
	})
	if err != nil {
		pack.RespError(c, err)
		return
	}
	pack.RespData(c, resp)
}
